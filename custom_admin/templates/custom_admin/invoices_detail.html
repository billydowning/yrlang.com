{% extends "layout.html" %}

{% block calendar_extras %}
<style>
  body {
    padding: 0;
    font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
    font-size: 14px;
  }







</style>
{% endblock calendar_extras %}

{% block content %}
<!--container-->
<div class="container">
    <div class="row">
        <div class="col-12">
            <h1 class="amit-black bolder montserrat page_main_header my-2">Invoices Detail </h1>
            <div class="container py-5 px-5">
                <h3 class="mt-5 mb-3 text-center"><b>Title : </b>{{ invoice.title }}</h3>
                <div class="row">
                    <div class="col-md-6 text-center">
                        <p><b>Amount : </b>{{ invoice.amount }}</p>
                    </div>
                    <div class="col-md-6 text-center">
                        <p><b>Currency : </b>{{ invoice.currency }}</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 text-center">
                        <p><b>Payee : </b>{{ invoice.payee }}</p>
                    </div>
                    <div class="col-md-6 text-center">
                        <p><b>Pater : </b>{{ invoice.payor }}</p>
                    </div>
                </div>
                {% if invoice.is_paid %}
                <div class="row">
                    <div class="col-md-6 text-center">
                        <p><b>Is Paid : </b>{{ invoice.is_paid }}</p>
                    </div>
                    <div class="col-md-6 text-center">
                        <p><b>Payment Date : </b>{{ invoice.date_paid }}</p>
                    </div>
                </div>
                {% endif %}
                {% if invoice.stripe_payment_id %}
                <h3 class="mt-5 mb-3 text-center"><b>Stripe Payment Id : </b>{{ invoice.stripe_payment_id }}</h3>
                {% endif %}
                {% if invoice.booking %}
                <h3 class="mt-5 mb-3 text-center"><b>Booking : </b>{{ invoice.booking }}</h3>
                {% endif %}
                {% if invoice.appointment %}
                <h3 class="mt-5 mb-3 text-center"><b>Appointment : </b>{{ invoice.appointment }}</h3>
                {% endif %}
            </div>
            <!--collapse-->
            <div id="accordion" class="my-5">
                {% for room in rooms %}
                <div class="card">
                    <div class="card-header" id="heading_{{ forloop.counter }}">
                        <h5 class="mb-0">
                            <button class="btn btn-link collapsed" data-toggle="collapse"
                                    data-target="#collapse_{{ forloop.counter }}"
                                    aria-expanded="false" aria-controls="collapse_{{ forloop.counter }}">
                                Show
                            </button>
                            <span class="mx-2">{{ room.creator }}</span>
                            <span class="mx-2">{{ room.partner }}</span>
                            <span class="mx-2">{{ room.date_created }}</span>
                        </h5>
                    </div>
                    {% if forloop.counter == 1 %}
                    <div id="collapse_{{ forloop.counter }}" class="collapse show"
                         aria-labelledby="heading_{{ forloop.counter }}" data-parent="#accordion">
                        {% else %}
                        <div id="collapse_{{ forloop.counter }}" class="collapse"
                             aria-labelledby="heading_{{ forloop.counter }}" data-parent="#accordion">
                            {% endif %}
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-4"></div>
                                    <div class="col-4 py-0 px-0 mx-0 my-0">
                                        {% for msg in room.message_set.all %}
                                        {% if room.creator == msg.author %}
                                        <p>{{ msg }}</p>
                                        {% else %}
                                        <p class="text-right py-0 px-0 mx-0 my-0">{{ msg }}</p>
                                        {% endif %}

                                        {% endfor %}
                                    </div>
                                    <div class="col-3"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}

                </div>
            </div>
        </div>
        <!--container end-->
        {% endblock content %}
