{% extends "layout.html" %}
{% load check_status static%}
{% block content %}
<div class="container">
    <div class="content-section">

        <h1 class="page_main_header my-3">{{banner}}</h1>


        <form method="POST" action="" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.management_form }}
            <fieldset class="form-group">

                <div class="form-group">
                    <table class="table">


                        {% for form in form %}
                        {% if forloop.first %}
                        <thead>
                        <tr>
                            {% for field in form.visible_fields %}
                            <th>{{ field.label|capfirst }}</th>
                            {% endfor %}
                        </tr>
                        </thead>
                        {% endif %}
                        <tr class="{% cycle 'row1' 'row2' %} formset_row">
                            {% for field in form.visible_fields %}
                            <td>
                                {# Include the hidden fields in the form #}
                                {% if forloop.first %}
                                {% for hidden in form.hidden_fields %}
                                {{ hidden }}
                                {% endfor %}
                                {% endif %}
                               <font color="red"> {{ field.errors.as_ul }}</font>
                                {{ field }}
                            </td>
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </table>
                </div>


            </fieldset>
            <div class="form-group">

                <button class="btn theme_btn btn-success" type="submit">Save</button>

            </div>
        </form>

    </div>

</div>
<script type="text/javascript">
    $(document).ready(function(){
        $('#id_form-0-image').attr('style', "visibility:hidden");
        $('#id_form-0-image').prev().attr('class', 'custom-file-label');
        $("#id_form-0-image").on("change", function() {
          var fileName = $(this).val().split("\\").pop();
          console.info(fileName);
          console.info('fileName');
          $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
        });

        $('#id_form-1-image').attr('style', "visibility:hidden");
        $('#id_form-1-image').prev().attr('class', 'custom-file-label');
        $("#id_form-1-image").on("change", function() {
          var fileName = $(this).val().split("\\").pop();
          console.info(fileName);
          console.info('fileName');
          $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
        });
    });

</script>
<script src="{% static 'fromset_js/formset.js' %}"></script>
<script type="text/javascript">
    $('.formset_row').formset({
        addText: 'Add',
        deleteText: 'remove',
        prefix: 'form'
    });
</script>
{% endblock content %}
