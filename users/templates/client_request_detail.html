{% extends "layout.html" %}
{% load check_role %}
{% block content %}
<div class="content-section container mt-5">
    <div class="media">{% if req.user.profile_image %}
        <div class="profile_d row">
            <div class="col-12 col-md-3 col-lg-2">
                <img class="uk-border-circle" width="40" height="40" src="{{ req.user.profile_image.url }}">
                {% else %}
                <img class="uk-border-circle" width="40" height="40" src="{{ avtar }}">
                {% endif %}
            </div>
            <div class="col-12 col-md-9 col-lg-10">
                <div class="media-body text-left w-100">
                    <h2>{{ req.user.username }}</h2>
                    <h2>Requested For : {{ req.requested_for }}</h2>
                    <div class="row">
                        <div class="col-12  col-md-6 col-lg-4">
                            <p>Requested For : {{ req.requested_for }}</p>
                        </div>
                        <div class="col-12  col-md-6 col-lg-4">
                            <p>Requested Date : {{req.requested_on.date}} </p>
                        </div>
                        <div class="col-12  col-md-6 col-lg-4">
                            <p>Requested Time : {{req.requested_on.time}} </p>
                        </div>
                        <div class="col-12  col-md-6 col-lg-4">
                            {% for clip in videos %}
                            <p>Language :{{clip.language}}</p>
                            <p>Videos :
                            <video width="530" height="440" controls >
                             <source src="{{clip.files.url}}" type="video/mp4"> </source>
                            </video>
                            </p>
                            {%endfor%}
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>
    {% if req.status == 'requested'  %}
    <button><a href="{% url 'verify_client_request' req.id %}">Verify</a></button>
    {% elif req.status == 'verified' %}
    <form action="{{req.get_detail}}" method="post">
        {% csrf_token %}
        <button type="submit"  class="btn btn-theme">Approved</button>
        </form>

    <br>
  <button style="background:red; " class="btn mx-2  btn-danger" data-toggle="modal"
            data-target="#exampleModal"
            data-btn="cancel"
            data-title="Cancel">Cancel</button>
    {% endif %}
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
      <form method="POST">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Cancel Request</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

          {% csrf_token %}
          <div class="form-group" id="approved_date_div">
            {{ form.reason.label }}
            {% if form.approved_date.errors %}

                <div class="invalid-feedback">

                        <span>{{ form.reason.error }}</span>

                </div>
            {% else %}
                {{ form.reason }}
            {% endif %}
          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="submit" id="submit" class="btn btn-primary">Submit</button>
      </div>
    </div>
    </form>
  </div>
</div>
</div>
<script>
     $(document).ready(function() {

        $('#id_reason').prop('required', true);

     });
</script>

{% endblock content %}