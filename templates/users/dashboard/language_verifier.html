{% extends "layout.html" %}
{% load static check_role %}
{% load rating_check %}
{% load static %}
{% load leaflet_tags %}
{% load ratings  %}

{% block link_css %}
{% static 'webflow_CSS_JS_IMG' as webflow_url %}
<link href="{{webflow_url}}/css/normalize.css" rel="stylesheet" type="text/css">
<link href="{{webflow_url}}/css/webflow.css" rel="stylesheet" type="text/css">
<link href="{{webflow_url}}/css/yrlang.webflow.css" rel="stylesheet" type="text/css">
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
<script type="text/javascript">
    WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Varela Round:400","Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic","Questrial:regular"]  }});
</script>
<script type="text/javascript">
    !function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);
</script>
<link href="{{webflow_url}}/images/favicon.png" rel="shortcut icon" type="image/x-icon">
<link href="{{webflow_url}}/images/webclip.png" rel="apple-touch-icon">


<style>
  .clock {
    position: absolute;



    font-size: 10px;
    font-family: Orbitron;
    letter-spacing: 7px;
        margin-top: 10px;



}
</style>
{% leaflet_css %}
{% leaflet_js %}
{% endblock link_css %}


{% block content %}
{% static 'webflow_CSS_JS_IMG' as webflow_url %}
{% localite user=user as loc %}
{% provider user=user as pro %}
<div class="content-section container mt-5">
    <div class="home_dashboard">
      <div class="div-block-6 d-block3"></div>
  <h3 class="heading-61 d-block">LSV Dashboard</h3>
  <div class="div-block-64 d-block"></div>
  <div class="w-container">
    <div class="dash-columns w-row">
      <div class="w-col w-col-3">
        <div class="dash-div">
          <div class="w-row">
            <div class="w-col w-col-3">
             {% if request.user.profile_image %}
                        <img src="{{ request.user.profile_image.url }}" alt="User Imgae" class="image-71">
                    {% else %}
                        <img src="{% static 'images/avtar1.png' %}" alt="image not found" class="image-71">
                    {% endif %}
            </div>
            <div class="w-col w-col-9">
              <ul role="list" class="w-list-unstyled">
                 <li>
                  <h4 class="heading-62">{{ request.user.username|title }}</h4>
                </li>

                <li>
                  <h6 class="heading-64 clock" id="MyClockDisplay"> </h6>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="w-col w-col-6">
        <div class="dash-div">
          <div class="w-layout-grid grid-6">
            <h1 class="dash-heading">{{canceled_request_total|default:'0'}}</h1>
            <h1 class="dash-heading">{{total_request|default:'0'}}</h1>
            <h1 class="dash-heading">{{pending_request_total|default:'0'}}</h1>
            <div class="dash-text">Canceled Request</div>
            <div class="dash-text">Total Request</div>
            <div class="dash-text">Pendin Request</div>
          </div>
        </div>
      </div>
      <div class="w-col w-col-3">
        <div class="dash-div">
          <div class="w-layout-grid grid-3">
            <h1 class="dash-heading">{{verified_request_total|default:'0'}}</h1>
            <h1 class="dash-heading">{{approved_request_total|default:'0'}}</h1>
            <div class="dash-text">Verified Request</div>
            <div class="dash-text">Approved Request</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="w-container">
    <h3 class="heading-65">Pending Provider Request</h3>
    <div class="dash-line"></div>
    <div class="w-row">
     {% for pro_request in provider_requests %}
      <div class="w-col w-col-6">
        <div class="dash-div">
          <div class="w-row">
            <div class="w-col w-col-3">
               {% if pro_request.user.profile_image %}
                  <img src="{{ pro_request.user.profile_image.url }}" alt="User Imgae" class="image-75">
               {% else %}
                  <img src="{% static 'images/avtar1.png' %}" alt="image not found" class="image-75">
               {% endif %}
            </div>
            <div class="column-9 w-col w-col-7">
              <ul role="list" class="list-5 w-list-unstyled">
                <li>
                  <h4 class="heading-66">{{pro_request.user.username}}</h4>
                </li>

                <li>
                  <div>Requested For: {{pro_request.requested_for}}</div>
                </li>
                <li>
                  <div>Requested date: {{pro_request.requested_on}}</div>
                </li>
              </ul>
            </div>
            <a href="{{ pro_request.get_detail }}">
              <div class="w-col w-col-2"><img src="{{webflow_url}}/images/icons8-event-52-1.png" alt="" class="image-73"></div>
              </a>
          </div>
        </div>
      </div>
      {% empty %}
      <h3 class="no-data-found-dash">No Provider Pending Request Found</h3>
      {% endfor %}

    </div>
  </div>
  <div>
    <div class="w-container">
      <h3 class="heading-69">Pending Localite Request</h3>
      <div class="dash-line"></div>
         {% for loca_request in localite_requests %}
      <div class="w-layout-grid grid-7">
        <div class="dash-div">
          <div class="dash-columns w-row">

            <div class="w-col w-col-3">
              {% if loca_request.user.profile_image %}
                  <img src="{{ loca_request.user.profile_image.url }}" alt="User Imgae" class="image-75">
               {% else %}
                  <img src="{% static 'images/avtar1.png' %}" alt="image not found" class="image-75">
               {% endif %}
            </div>

            <div class="w-col w-col-7">
              <ul role="list" class="w-list-unstyled">
                <li>
                  <h4 class="heading-72">{{loca_request.user.username}}</h4>
                </li>
                 <li>
                  <div>Requested For: {{loca_request.requested_for}}</div>
                </li>
                <li>
                  <div>Requested date: {{loca_request.requested_on}}</div>
                </li>
              </ul>
            </div>
            <a href="{{ loca_request.get_detail }}">
              <div class="w-col w-col-2"><img src="{{webflow_url}}/images/icons8-event-52-1.png" alt="" class="image-73"></div>
              </a>
          </div>
        </div>
        </div>
        {% empty %}
        <h3 class="no-data-found-dash">No Upcoming Appointment in Next 7 Days</h3>
        {% endfor %}
    </div>
  </div>

    </div>
</div>
{% endblock %}

{% block bottom_js %}
<script>
function showTime(){
    var date = new Date();
    var h = date.getHours(); // 0 - 23
    var m = date.getMinutes(); // 0 - 59
    var s = date.getSeconds(); // 0 - 59
    var session = "AM";

    if(h == 0){
        h = 12;
    }

    if(h > 12){
        h = h - 12;
        session = "PM";
    }

    h = (h < 10) ? "0" + h : h;
    m = (m < 10) ? "0" + m : m;
    s = (s < 10) ? "0" + s : s;

    var time = h + ":" + m + ":" + s + " " + session;
    document.getElementById("MyClockDisplay").innerText = time;
    document.getElementById("MyClockDisplay").textContent = time;

    setTimeout(showTime, 1000);

}

showTime();
</script>
{% endblock %}