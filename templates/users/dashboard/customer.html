{% extends "layout.html" %}
{% load static check_role %}
{% load rating_check %}
{% load static %}
{% load leaflet_tags %}
{% load ratings  %}

{% block link_css %}
{% static 'webflow_CSS_JS_IMG' as webflow_url %}
<link href="{{webflow_url}}/css/normalize.css" rel="stylesheet" type="text/css">
<link href="{{webflow_url}}/css/webflow.css" rel="stylesheet" type="text/css">
<link href="{{webflow_url}}/css/yrlang.webflow.css" rel="stylesheet" type="text/css">
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
<script type="text/javascript">
    WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Varela Round:400","Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic","Questrial:regular"]  }});
</script>
<script type="text/javascript">
    !function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);
</script>
<link href="{{webflow_url}}/images/favicon.png" rel="shortcut icon" type="image/x-icon">
<link href="{{webflow_url}}/images/webclip.png" rel="apple-touch-icon">

<style>
  .clock {
    position: absolute;



    font-size: 10px;
    font-family: Orbitron;
    letter-spacing: 7px;
        margin-top: 10px;



}
</style>
{% leaflet_css %}
{% leaflet_js %}
{% endblock link_css %}


{% block content %}
{% static 'webflow_CSS_JS_IMG' as webflow_url %}
{% localite user=user as loc %}
{% provider user=user as pro %}
<div class="content-section container mt-5">
    <div class="home_dashboard">
      <div class="div-block-6 d-block3"></div>
  <h3 class="heading-61 d-block">Customer Dashboard</h3>
  <div class="div-block-64 d-block"></div>
  <div class="w-container">
    <div class="dash-columns w-row">
      <div class="w-col w-col-3">
        <div class="dash-div">
          <div class="w-row">
            <div class="w-col w-col-3">
            {% if request.user.profile_image %}
                        <img src="{{ request.user.profile_image.url }}" alt="User Imgae" class="image-71">
                    {% else %}
                        <img src="{% static 'images/avtar1.png' %}" alt="image not found" class="image-71">
                    {% endif %}
            </div>
            <div class="w-col w-col-9">
              <ul role="list" class="w-list-unstyled">
                <li>
                  <h4 class="heading-62">{{ request.user.username|title }}</h4>
                </li>

                <li>
                  <h6 class="heading-64 clock" id="MyClockDisplay"> </h6>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="w-col w-col-6">
        <div class="dash-div">
          <div class="w-layout-grid grid-6">
            <h1 class="dash-heading">{{upcoming_Task_total}}</h1>
            <h1 class="dash-heading">{{booking_total}}</h1>
            <h1 class="dash-heading">{{appointments_total}}</h1>
            <div class="dash-text">Upcoming Task</div>
            <div class="dash-text">Total Booking</div>
            <div class="dash-text">Total Appointmet</div>
          </div>
        </div>
      </div>
      <div class="w-col w-col-3">
        <div class="dash-div"></div>
      </div>
    </div>
  </div>
  <div class="w-container">
    <h3 class="heading-65">Upcoming Booking</h3>
    <div class="dash-line"></div>
    <div class="w-row">
      {% for booking in upcoming_booking %}
      <div class="w-col w-col-6">
        <div class="dash-div">
          <div class="w-row">
            <div class="w-col w-col-3">
               {% if booking.requestee.profile_image %}
                  <img src="{{ booking.requestee.profile_image.url }}" alt="User Imgae" class="image-75">
               {% else %}
                  <img src="{% static 'images/avtar1.png' %}" alt="image not found" class="image-75">
               {% endif %}
            </div>
            <div class="column-9 w-col w-col-7">
              <ul role="list" class="list-5 w-list-unstyled">
                <li>
                  <h4 class="heading-66">{{booking.requestee.username}}</h4>
                </li>
                <li>
                  <h5 class="heading-68">{% for profession in booking.requestee.profession.all %}{{ profession }},{%endfor%}</h5>
                </li>
                <li>
                  <div>Verified languages: {% for language in  booking.requestee.language.all  %}{{language}}, {% endfor %}</div>
                </li>
              </ul>
            </div>
            <div class="w-col w-col-2"><img src="{{webflow_url}}/images/icons8-event-52-1.png" alt="" class="image-73"></div>
          </div>
        </div>
      </div>
      {% empty %}
      <h3 class="no-data-found-dash">No Upcomig Booking in Next 7 Days</h3>
      {% endfor %}

    </div>
  </div>
  <div>
    <div class="w-container">
      <h3 class="heading-69">Upcoming Appointments</h3>
      <div class="dash-line"></div>

        {% for appointment in upcoming_appointments %}
      <div class="w-layout-grid grid-7">
        <div class="dash-div">
          <div class="dash-columns w-row">
            <div class="w-col w-col-3">
              {% if appointment.requestee.profile_image %}
                  <img src="{{ appointment.requestee.profile_image.url }}" alt="User Imgae" class="image-75">
               {% else %}
                  <img src="{% static 'images/avtar1.png' %}" alt="image not found" class="image-75">
               {% endif %}
            </div>
            <div class="w-col w-col-7">
              <ul role="list" class="w-list-unstyled">
                <li>
                  <h4 class="heading-72">{{appointment.requestee.username}}</h4>
                </li>
                <li>
                  <h5 class="heading-74">  {% for categorys in user.providercategories_set.all %}{{categorys.category}},{% endfor %} </h5>
                </li>
                <li>
                  <div>Verified languages: {% for language in  appointment.requestee.language.all  %}{{language}}, {% endfor %}</div>
                </li>
              </ul>
            </div>
            <div class="w-col w-col-2"><img src="{{webflow_url}}/images/icons8-event-52-1.png" alt="" class="image-76"></div>
          </div>
        </div>
        </div>
        {% empty %}
        <h3 class="no-data-found-dash">No Upcoming Appointment in Next 7 Days</h3>
        {% endfor %}



    </div>
  </div>

    </div>
</div>
{% endblock %}
{% block bottom_js %}
<script>
function showTime(){
    var date = new Date();
    var h = date.getHours(); // 0 - 23
    var m = date.getMinutes(); // 0 - 59
    var s = date.getSeconds(); // 0 - 59
    var session = "AM";

    if(h == 0){
        h = 12;
    }

    if(h > 12){
        h = h - 12;
        session = "PM";
    }

    h = (h < 10) ? "0" + h : h;
    m = (m < 10) ? "0" + m : m;
    s = (s < 10) ? "0" + s : s;

    var time = h + ":" + m + ":" + s + " " + session;
    document.getElementById("MyClockDisplay").innerText = time;
    document.getElementById("MyClockDisplay").textContent = time;

    setTimeout(showTime, 1000);

}

showTime();
</script>
{% endblock %}